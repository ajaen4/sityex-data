config:
  aws:region: eu-west-1
  containers:
    data_uploader:
      build_version: 0.1.2 # data_uploader version
      subnet_type: PUBLIC
      env_variables:
        - name: ENV
          value: dev
    partner_uploader:
      build_version: 1.3.6 # partner_uploader version
      subnet_type: PUBLIC
      cpu: 1024
      memory: 4096
      env_variables:
        - name: ENV
          value: dev
    partner_downloader:
      build_version: 0.3.1 # partner_downloader version
      subnet_type: PUBLIC
      cpu: 1024
      memory: 8192
      env_variables:
        - name: FEVER_GDRIVE_FILE_ID
          value: 1U8TPpGz0wjM0r33vbxKnkbB9-Vqw6J5wq5CoKqOzSh4
        - name: HOUSING_ANYWHERE_URL
          value: https://housinganywhere.com/feeds/Sityex/Sityex.json
        - name: UNIPLACES_URL
          value: https://feeds.uniplaces.com/feeds/sityex-en-es?_format=xml
  jobs:
    all_cities:
      number_of_workers: 4
      args:
        --PROCESSED_DATE: 11-10-2023
        --BIG_CITY_POP_THRESHOLD: 1000000
        --BIG_CITY_KM_THRESHOLD: 20.0
        --TESTING_PREFIX: "None"
    costs_consolidation:
      number_of_workers: 10
      args:
        --PROCESSED_DATE: 11-10-2023
        --TESTING_PREFIX: "None"
        --TESTING_FILE_NAME: "None"
    indicators:
      number_of_workers: 2
      args:
        --PROCESSED_DATE: 11-10-2023
        --TESTING_PREFIX: "None"
    taxes:
      number_of_workers: 2
      args:
        --PROCESSED_DATE: 11-10-2023
        --TESTING_PREFIX: "None"
    weather:
      number_of_workers: 25
      args:
        --PROCESSED_DATE: 11-10-2023
        --TESTING_PREFIX: "None"
        --TESTING_CITY_ID: "None"
    tags:
      number_of_workers: 4
      args:
        --PROCESSED_DATE: 11-10-2023
        --TESTING_PREFIX: "None"
        --TESTING_CITY_ID: "None"
    fever:
      number_of_workers: 2
      args:
        --PROCESSED_DATE_CITIES: 11-10-2023
        --TESTING_PREFIX: "None"
        --TESTING_CITY_ID: "None"
    housing_anywhere:
      number_of_workers: 2
      args:
        --TESTING_PREFIX: "None"
  orchestrators:
    partner_workflow:
      type: STANDARD
      states:
        - name: Download partner data
          type: Task
          resource: partner_downloader
        - name: Process partner data
          type: Parallel
          branches:
            - name: Fever branch
              states:
                - name: Fever job
                  type: Task
                  resource: fever
                  is_end: true
            - name: HousingAnywhere branch
              states:
                - name: HousingAnywhere job
                  type: Task
                  resource: housing_anywhere
                  is_end: true
        - name: Upload data
          type: Task
          resource: partner_uploader
          is_end: true
